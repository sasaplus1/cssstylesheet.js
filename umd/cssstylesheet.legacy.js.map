{"version":3,"file":"cssstylesheet.legacy.js","sources":["../src/index.mjs","../index.mjs"],"sourcesContent":["// NOTE: getElementsByTagName returns HTMLCollection(or NodeList) every time\nconst head = document.getElementsByTagName('head')[0];\n\nconst cssss = window.CSSStyleSheet;\n\nconst cssRulesName = 'cssRules' in cssss.prototype ? 'cssRules' : 'rules';\nconst cssDeleteRuleName =\n  'deleteRule' in cssss.prototype ? 'deleteRule' : 'removeRule';\n\nconst CSSStyleSheet =\n  'createStyleSheet' in document\n    ? /**\n       * constructor for old IE\n       *\n       * @constructor\n       */\n      function CSSStyleSheet() {\n        this._element = null;\n        this._sheet = document.createStyleSheet();\n      }\n    : /**\n       * constructor for modern browsers\n       *\n       * @constructor\n       */\n      function CSSStyleSheet() {\n        this._element = document.createElement('style');\n\n        // NOTE: for WebKit\n        this._element.appendChild(document.createTextNode(''));\n\n        head.appendChild(this._element);\n\n        this._sheet = this._element.sheet;\n      };\n\nexport default CSSStyleSheet;\n\nCSSStyleSheet.prototype.insertRule =\n  'insertRule' in cssss.prototype\n    ? /**\n       * insert rule for modern browsers\n       *\n       * @param {string} selector\n       * @param {string} ruleText\n       * @param {number} index\n       * @return {number}\n       */\n      function insertRule(selector, ruleText, index) {\n        return this._sheet.insertRule(selector + '{' + ruleText + '}', index);\n      }\n    : /**\n       * insert rule for old IE\n       *\n       * @param {string} selector\n       * @param {string} ruleText\n       * @param {number} index\n       * @return {number}\n       */\n      function insertRule(selector, ruleText, index) {\n        return this._sheet.addRule(selector, ruleText, index);\n      };\n\n/**\n * delete rule for modern browsers\n *\n * @return {undefined}\n */\nCSSStyleSheet.prototype.deleteRule = function deleteRule(index) {\n  return this._sheet[cssDeleteRuleName](index);\n};\n\n/**\n * insert rule at last\n *\n * @param {string} selector\n * @param {string} ruleText\n * @return {number}\n */\nCSSStyleSheet.prototype.addRule = function addRule(selector, ruleText) {\n  const length = this._sheet[cssRulesName].length;\n\n  return this.insertRule(selector, ruleText, length);\n};\n\n/**\n * delete all rule\n */\nCSSStyleSheet.prototype.clearRule = function clearRule() {\n  let i = this._sheet[cssRulesName].length;\n\n  while (i--) {\n    this.deleteRule(i);\n  }\n};\n\n/**\n * get style element\n *\n * @return {HTMLStyleElement?}\n */\nCSSStyleSheet.prototype.getElement = function getElement() {\n  return this._element;\n};\n\n/**\n * get CSSStyleSheet\n *\n * @return {CSSStyleSheet}\n */\nCSSStyleSheet.prototype.getSheet = function getSheet() {\n  return this._sheet;\n};\n\n/**\n * get rules\n *\n * @return {CSSRuleList}\n */\nCSSStyleSheet.prototype.getRules = function getRules() {\n  return this._sheet[cssRulesName];\n};\n\n/**\n * create CSSStyleSheet instance\n *\n * @return {CSSStyleSheet}\n */\nCSSStyleSheet.create = function create() {\n  return new CSSStyleSheet();\n};\n","/**\n * @file entrypoint for ES Modules.\n */\n\nexport { default } from './src/index.mjs';\n"],"names":["head","document","getElementsByTagName","cssss","window","CSSStyleSheet","cssRulesName","prototype","cssDeleteRuleName","_element","_sheet","createStyleSheet","createElement","appendChild","createTextNode","sheet","insertRule","selector","ruleText","index","addRule","deleteRule","length","clearRule","i","getElement","getSheet","getRules","create"],"mappings":"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"}