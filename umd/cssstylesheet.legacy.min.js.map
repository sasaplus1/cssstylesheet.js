{"version":3,"file":"cssstylesheet.legacy.min.js","sources":["../src/index.mjs"],"sourcesContent":["// NOTE: getElementsByTagName returns HTMLCollection(or NodeList) every time\nconst head = document.getElementsByTagName('head')[0];\n\nconst cssss = window.CSSStyleSheet;\n\nconst cssRulesName = 'cssRules' in cssss.prototype ? 'cssRules' : 'rules';\nconst cssDeleteRuleName =\n  'deleteRule' in cssss.prototype ? 'deleteRule' : 'removeRule';\n\nconst CSSStyleSheet =\n  'createStyleSheet' in document\n    ? /**\n       * constructor for old IE\n       *\n       * @constructor\n       */\n      function CSSStyleSheet() {\n        this._element = null;\n        this._sheet = document.createStyleSheet();\n      }\n    : /**\n       * constructor for modern browsers\n       *\n       * @constructor\n       */\n      function CSSStyleSheet() {\n        this._element = document.createElement('style');\n\n        // NOTE: for WebKit\n        this._element.appendChild(document.createTextNode(''));\n\n        head.appendChild(this._element);\n\n        this._sheet = this._element.sheet;\n      };\n\nexport default CSSStyleSheet;\n\nCSSStyleSheet.prototype.insertRule =\n  'insertRule' in cssss.prototype\n    ? /**\n       * insert rule for modern browsers\n       *\n       * @param {string} selector\n       * @param {string} ruleText\n       * @param {number} index\n       * @return {number}\n       */\n      function insertRule(selector, ruleText, index) {\n        return this._sheet.insertRule(selector + '{' + ruleText + '}', index);\n      }\n    : /**\n       * insert rule for old IE\n       *\n       * @param {string} selector\n       * @param {string} ruleText\n       * @param {number} index\n       * @return {number}\n       */\n      function insertRule(selector, ruleText, index) {\n        return this._sheet.addRule(selector, ruleText, index);\n      };\n\n/**\n * delete rule for modern browsers\n *\n * @return {undefined}\n */\nCSSStyleSheet.prototype.deleteRule = function deleteRule(index) {\n  return this._sheet[cssDeleteRuleName](index);\n};\n\n/**\n * insert rule at last\n *\n * @param {string} selector\n * @param {string} ruleText\n * @return {number}\n */\nCSSStyleSheet.prototype.addRule = function addRule(selector, ruleText) {\n  const length = this._sheet[cssRulesName].length;\n\n  return this.insertRule(selector, ruleText, length);\n};\n\n/**\n * delete all rule\n */\nCSSStyleSheet.prototype.clearRule = function clearRule() {\n  let i = this._sheet[cssRulesName].length;\n\n  while (i--) {\n    this.deleteRule(i);\n  }\n};\n\n/**\n * get style element\n *\n * @return {HTMLStyleElement?}\n */\nCSSStyleSheet.prototype.getElement = function getElement() {\n  return this._element;\n};\n\n/**\n * get CSSStyleSheet\n *\n * @return {CSSStyleSheet}\n */\nCSSStyleSheet.prototype.getSheet = function getSheet() {\n  return this._sheet;\n};\n\n/**\n * get rules\n *\n * @return {CSSRuleList}\n */\nCSSStyleSheet.prototype.getRules = function getRules() {\n  return this._sheet[cssRulesName];\n};\n\n/**\n * create CSSStyleSheet instance\n *\n * @return {CSSStyleSheet}\n */\nCSSStyleSheet.create = function create() {\n  return new CSSStyleSheet();\n};\n"],"names":["head","document","getElementsByTagName","cssss","window","CSSStyleSheet","cssRulesName","prototype","cssDeleteRuleName","_element","_sheet","createStyleSheet","createElement","appendChild","createTextNode","this","sheet","insertRule","selector","ruleText","index","addRule","deleteRule","length","clearRule","i","getElement","getSheet","getRules","create"],"mappings":";;;;;uNACA,IAAMA,EAAOC,SAASC,qBAAqB,QAAQ,GAE7CC,EAAQC,OAAOC,cAEfC,EAAe,aAAcH,EAAMI,UAAY,WAAa,QAC5DC,EACJ,eAAgBL,EAAMI,UAAY,aAAe,aAE7CF,EACJ,qBAAsBJ,SAMlB,gBACOQ,SAAW,UACXC,OAAST,SAASU,oBAOzB,gBACOF,SAAWR,SAASW,cAAc,cAGlCH,SAASI,YAAYZ,SAASa,eAAe,KAElDd,EAAKa,YAAYE,KAAKN,eAEjBC,OAASK,KAAKN,SAASO,cAKpCX,EAAcE,UAAUU,WACtB,eAAgBd,EAAMI,UASlB,SAAoBW,EAAUC,EAAUC,UAC/BL,KAAKL,OAAOO,WAAWC,EAAW,IAAMC,EAAW,IAAKC,IAUjE,SAAoBF,EAAUC,EAAUC,UAC/BL,KAAKL,OAAOW,QAAQH,EAAUC,EAAUC,IAQvDf,EAAcE,UAAUe,WAAa,SAAoBF,UAChDL,KAAKL,OAAOF,GAAmBY,IAUxCf,EAAcE,UAAUc,QAAU,SAAiBH,EAAUC,OACrDI,EAASR,KAAKL,OAAOJ,GAAciB,cAElCR,KAAKE,WAAWC,EAAUC,EAAUI,IAM7ClB,EAAcE,UAAUiB,UAAY,mBAC9BC,EAAIV,KAAKL,OAAOJ,GAAciB,OAE3BE,UACAH,WAAWG,IASpBpB,EAAcE,UAAUmB,WAAa,kBAC5BX,KAAKN,UAQdJ,EAAcE,UAAUoB,SAAW,kBAC1BZ,KAAKL,QAQdL,EAAcE,UAAUqB,SAAW,kBAC1Bb,KAAKL,OAAOJ,IAQrBD,EAAcwB,OAAS,kBACd,IAAIxB"}